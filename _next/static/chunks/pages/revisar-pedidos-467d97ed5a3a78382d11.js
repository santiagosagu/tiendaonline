_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[18],{"9Q6F":function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return z}));var r=t("rePB"),o=t("q1tI"),i=t.n(o),u=t("80PL"),a=t("xWvD"),c=t("h4VS"),l=t("5D9J");function d(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}var s=function(){var e=Object(o.useState)(""),n=e[0],t=e[1],i=Object(o.useState)(!1),u=i[0],c=i[1],l=Object(o.useContext)(a.a),s=l.firebase,f=l.usuario;function p(e){var n=e.docs.map((function(e){return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?d(Object(t),!0).forEach((function(n){Object(r.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):d(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({ids:e.id},e.data())}));t(n[0].id)}return Object(o.useEffect)((function(){s.db.collection("usuario").onSnapshot(p)}),[]),Object(o.useEffect)((function(){n===f.uid&&c(!0)}),[n]),console.log(f.uid),{usuarioAdmin:n,verificarUsuarioAdmin:u}},f=i.a.createElement;function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function b(){var e=Object(c.a)(["\n    position: fixed;\n    top: 40%;\n    \n    width:330px;\n    height: 200px;\n    background-color: #e1e1e1;\n    padding: 2rem;\n    margin: 0 1rem 0 0;\n    align-items: center;\n    border: 1px solid #000;\n\n    @media (min-width: 768px) {\n        left: 40%;\n    }\n\n    select {\n        width: 200px;\n        padding: 0.5rem;\n        margin: 1rem 2rem;\n    }\n\n    button {\n        margin: 0.5rem;\n    }\n"]);return b=function(){return e},e}function g(){var e=Object(c.a)(["\n    \n    @media (min-width: 768px) {\n        text-align: center;\n    }\n"]);return g=function(){return e},e}function m(){var e=Object(c.a)(["\n    font-size: 1.6rem;\n    font-weight: bold;\n    text-align: center;\n"]);return m=function(){return e},e}function O(){var e=Object(c.a)(["\n    \n    font-size: 1.5rem;\n"]);return O=function(){return e},e}function v(){var e=Object(c.a)(["\n    font-weight: bold;\n    font-size: 1.2rem;\n"]);return v=function(){return e},e}function j(){var e=Object(c.a)(["\n    \n    border-bottom: 1px solid #e1e1e1;\n    margin: 0 auto;\n    \n\n    @media (min-width: 768px){\n        display: flex;\n        justify-content: space-between;\n        align-items: center;  \n        \n    }\n\n    img {\n        \n        margin: 3px;\n        \n        width: 100px;\n\n        @media (min-width: 768px) {\n            \n            margin: 3px; \n        }\n    }\n"]);return j=function(){return e},e}function h(){var e=Object(c.a)(["\n    \n    border-bottom: 1px solid blue;\n    background-color: #f2f2f2;\n    padding: 2rem;\n    position: relative;\n\n    @media (min-width: 768px) {\n        margin: 0 4rem ;\n    }\n\n"]);return h=function(){return e},e}function y(){var e=Object(c.a)(["\n    text-align: center;\n    font-size: 1.8rem;\n    margin: 1rem 0 2rem 0;\n"]);return y=function(){return e},e}var w=l.a.h1(y()),P=l.a.li(h()),x=l.a.li(j()),E=l.a.span(v()),S=l.a.p(O()),D=l.a.h2(m()),C=l.a.p(g()),N=l.a.div(b()),_=function(){var e=Object(o.useState)([]),n=e[0],t=e[1],u=Object(o.useState)(""),c=u[0],l=u[1],d=Object(o.useState)(!1),b=d[0],g=d[1],m=Object(o.useState)({select:""}),O=m[0],v=m[1],j=Object(o.useState)(""),h=j[0],y=j[1],_=Object(o.useContext)(a.a),k=_.firebase,T=(_.usuario,s()),z=T.usuarioAdmin;T.verificarUsuarioAdmin;function R(e){var n=e.docs.map((function(e){return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach((function(n){Object(r.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({idsPedidos:e.id},e.data())}));t(n)}Object(o.useEffect)((function(){l(z)}),[z]),Object(o.useEffect)((function(){k.db.collection("pedidos").orderBy("fechapedido").onSnapshot(R)}),[]);Object(o.useEffect)((function(){console.log(O)}),[O]);return console.log(h),f(i.a.Fragment,null,f(w,null,"Listado de Pedidos"),f("ul",null,n.map((function(e){return f(P,{key:e.idspedidos},f("h4",null,e.estado),f("div",null,!0===e.metodoPago.contraEntrega?f("h4",null,"Tipo: Contra Entrega"):f("h4",null,"Tipo: Online")),!0===e.metodoPago.contraEntrega?f("h3",null,f(E,null,"Total a Pagar:"),"  $",e.preciofinal):f("h3",null,f(E,null,"Total Pagado:")," $",e.preciofinal," "),f("p",null,f(E,null,"Referencia de pago:")," ",e.reference),f("div",null,f(D,null,"Datos del Cliente"),f("div",null,f("p",null,f(E,null,"Nombre:"),"  ",e.clientedatos.nombre),f("p",null,f(E,null,"Telefono:")," ",e.clientedatos.telefono),f("p",null,f(E,null,"Barrio:")," ",e.clientedatos.barrio),f("p",null,f(E,null,"Direccion:")," ",e.clientedatos.direccion))),f("div",null,f(D,null,"Productos"),f("div",null,f("ul",null,e.productos.map((function(e){return f(i.a.Fragment,null,f(x,null,f("img",{src:e.imagen,alt:"imagen producto"}),f("div",null,f(S,null,"Nombre:"),f("p",null,e.nombre)),f("div",null,f(S,null,"Categoria:"),f("p",null,e.categoria)),f("div",null,f(S,null,"Cantidad:"),f(C,null,e.cantidad))))}))))),c?f("div",null,f("button",{value:e.idsPedidos,className:"bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-2 px-4  my-2 rounded",onClick:function(e){return function(e){g(!0),y(e.target.value),console.log(e.target.value)}(e)}},"Editar Estado"),f("br",null),f("button",{value:e.idsPedidos,onClick:function(e){return function(e){console.log(e.target.value);var n=e.target.value;return k.db.collection("pedidos").doc(n).delete()}(e)},className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded"},"Eliminar")):null,b?f(N,null,f("form",{onSubmit:function(n){return function(e){e.preventDefault(),g(!1),v({select:""});var n=k.db.collection("pedidos").doc(h);return""===O.select?void 0:n.update({estado:O.select})}(n,e.idsPedidos)}},f("select",{name:"select",id:"nuevo-estado",onChange:function(e){return v(Object(r.a)({},e.target.name,e.target.value))}},f("option",{value:"",defaultValue:!0},"--Elige una opcion--"),f("option",{value:"Pendiente"},"Pendiente"),f("option",{value:"Confirmado"},"Confirmado"),f("option",{value:"Entregado"},"Entregado"),f("option",{value:"Rechazado"},"Rechazado")),f("div",null,f("button",{className:"bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded",onClick:function(){return g(!1),void v({select:""})}},"Cancelar"),f("button",{type:"submit",className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded"},"Editar")))):null)}))))},k=i.a.createElement;function T(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function z(){var e=Object(o.useState)([{superusuarioRol:!1}]),n=e[0],t=e[1],i=Object(o.useContext)(a.a),c=i.firebase,l=i.usuario,d=n[0].id,s=!1;function f(e){var n=e.docs.map((function(e){return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?T(Object(t),!0).forEach((function(n){Object(r.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):T(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({ids:e.id},e.data())}));t(n)}return l?(console.log("ya se definio"),l.uid===d&&(s=!0)):console.log("usuario no esta definido"),Object(o.useEffect)((function(){c.db.collection("usuario").onSnapshot(f)}),[]),k(u.a,null,s?k(_,null):k("h1",null,"No puedes estar aqui"))}},JVRb:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/revisar-pedidos",function(){return t("9Q6F")}])}},[["JVRb",1,2,3,4,0,5,6]]]);